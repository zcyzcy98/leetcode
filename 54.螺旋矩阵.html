<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    给你一个 m 行 n 列的矩阵 matrix ，请按照 顺时针螺旋顺序
    ，返回矩阵中的所有元素。
  </body>
  <script>
    const DIRS = [
      [0, 1],
      [1, 0],
      [0, -1],
      [-1, 0],
    ]; // 右下左上
    var spiralOrder = function (matrix) {
      if (!matrix.length || !matrix[0].length) {
        return [];
      }
      const m = matrix.length,
        n = matrix[0].length;
      const ans = Array(m * n);

      let i = 0,
        j = 0,
        di = 0;
      for (let k = 0; k < m * n; k++) {
        // 一共走 mn 步
        ans[k] = matrix[i][j];
        matrix[i][j] = Infinity; // 标记，表示已经访问过（已经加入答案）
        debugger
        const x = i + DIRS[di][0];
        const y = j + DIRS[di][1]; // 下一步的位置

        if (x < 0 || x >= m || y < 0 || y >= n || matrix[x][y] === Infinity) {
          di = (di + 1) % 4; // 右转 90°
        }
        i += DIRS[di][0];
        j += DIRS[di][1]; // 走一步
      }
    };

    // 使用示例
    const matrix = [
      [1, 2, 3],
      [4, 5, 6],
      [7, 8, 9],
    ];
    const res = spiralOrder(matrix);
    console.log(res); //
  </script>
</html>
