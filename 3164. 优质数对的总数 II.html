<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    var numberOfPairs = function (nums1, nums2, k) {
        const cnt = new Map();
        for (let x of nums1) {
            if (x % k) {
                continue;
            }
            x /= k;
            for (let d = 1; d * d <= x; d++) { // 枚举因子
                if (x % d) {
                    continue;
                }
                cnt.set(d, (cnt.get(d) || 0) + 1); // 统计因子
                debugger
                if (d * d < x) {
                    cnt.set(x / d, (cnt.get(x / d) ?? 0) + 1); // 因子总是成对出现
                }
            }
        }
        let ans = 0;
        for (const x of nums2) {
            ans += cnt.get(x) ?? 0;
        }
        return ans;
    };

    // 使用示例
    const nums1 = [1, 3, 4], nums2 = [1, 3, 4], k = 1
    const res = numberOfPairs(nums1, nums2, k);
    console.log(res); // 
</script>

</html>